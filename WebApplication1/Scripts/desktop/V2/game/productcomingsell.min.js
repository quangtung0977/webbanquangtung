function ShowPop(n){if(typeof $.fancybox=="undefined")return $.getScript("/Scripts/desktop/jquery/fancybox.js").done(function(){ShowPop(n)}),!1;$("#wrap_cart .register").show();$("#wrap_cart .subSussess").hide();AddScriptUserCookies();$.fancybox({href:$(n).attr("ref"),transitionIn:"none",transitionOut:"none",titlePosition:"over",beforeShow:function(){$("body").css({"overflow-y":"hidden"})},afterClose:function(){$("body").css({"overflow-y":"visible"})}})}function AddScriptUserCookies(){$.getScript("/Scripts/desktop/libs/tgdd_cookies.js").done(function(){})}function getGender(){return $('.gender input:radio[name="BillingAddress.iGender"]:checked').length==1?$('.gender input:radio[name="BillingAddress.iGender"]:checked').val()=="1"?"anh ":"chị ":"bạn "}function SubmitQuickOrder(n){if($("#IsCallSupport").val("false"),$(".noteerror").hide(),SUBMIT_QUICK_ORDER_BOX_CALLING_FLAG){$("#wrap_cart input[name='BillingAddress.ProvinceName']").val($("#wrap_cart select[name='BillingAddress.ProvinceId'] option:selected").text());$("#wrap_cart input[name='BillingAddress.DistictName']").val($("#wrap_cart select[name='BillingAddress.DistictId'] option:selected").text());$("#PriceClient").val($("#wrap_cart .asideleft .pricesale").html());var t=n.serialize();SUBMIT_QUICK_ORDER_BOX_CALLING_FLAG=!1;POSTAjax("/aj/Order/SubmitQuickOrder/",t,BeforeSendAjax,function(n){CallBackSubmitQuickOrder(n);EndSendAjax();SUBMIT_QUICK_ORDER_BOX_CALLING_FLAG=!0},function(){SUBMIT_QUICK_ORDER_BOX_CALLING_FLAG=!0;var n="";n+="Hệ thông không ghi nhận được đơn hàng này. \r\nBạn vui lòng tải lại trang và thử lại";alert(n);EndSendAjax()},!0)}}function SubmitQuickOrderDelay(){qo_submitting=!1}function AddEventPageLoad(){$(".dropdown").on("click",function(){$(this).next(".showdropdown").slideToggle("fast");setTimeout(function(){$.fancybox.update()},400)});$(".closedropdown").on("click",function(){$(".showdropdown").slideToggle();setTimeout(function(){$.fancybox.update()},400)});$('.color-list input:radio[name="colorproduct"]').change(function(){$("#wrap_cart input[name='ProductCode']").val($(this).val());ChangePriceByProductCode($(this).val());ChangeImageByProductCode($(this).attr("img"))});$('.color-list input:radio[name="colorproduct"]').length==1&&$('.color-list input:radio[name="colorproduct"]').trigger("click");$('.gender input:radio[name="gender"]').change(function(){$("#BillingAddress.iGender").val($(this).val())});$(".enteradd").on("click",function(n){n.preventDefault();$("#IsShipAtHome").val($(this).next(".showdropdown").is(":hidden"));$("#IsShipAtHome").val()=="true"?$(".phuctapqua").show():$(".phuctapqua").hide();CheckLoadProvince();$(this).next(".showdropdown").slideToggle("fast");setTimeout(function(){$.fancybox.update()},400)});$("#IsProductCode").change(function(){$("#wrap_cart input[name='IsProductCode']").val(this.checked);$(this).parent(".choosepay").next(".showdropdown").slideToggle("fast");$.fancybox.update()});$("#IsCompany").change(function(){$("#wrap_cart input[name='IsCompany']").val(this.checked);$(this).parent(".choosepay").next(".showdropdown").slideToggle("fast");$.fancybox.update()});$("#cbxPayOnline").change(function(){this.checked?($(this).parent(".choosepay").next(".showdropdown").show(),$("#payment").hide()):($(this).parent(".choosepay").next(".showdropdown").hide(),$("#payment").show(),$("#wrap_cart input[name='PaymentMethod']").val("0"))});$(".btnapp").click(function(){var n={CouponCode:$("#CouponCode").val(),PhoneNumber:$("#wrap_cart input[name='BillingAddress.PhoneNumber']").val(),ProductId:productID,ProductCode:$("#wrap_cart #ProductCode").val()};POSTAjax("/aj/Order/CheckCouponCode",n,BeforeSendAjax,function(n){n!=null&&n!=""&&(n._error!=""?n._show?alert(n._error):console.log(n._error):($("#CouponCode").attr("readonly",!0),$(".priceline").html($(".pricesale").html()),$(".pricesale").html(formatNumberValue(n._result)+"₫"),$(".coupon1").hide(),$(".coupon2").show(),$("#spanCouponCode").html($("#CouponCode").val()),$("#IsProductCode").attr("disabled","disabled")));EndSendAjax()},ErrorAjax,!0)});$(".btndelete").click(function(){$("#CouponCode").attr("readonly",!1).val("");$(".pricesale").html($(".priceline").html());$(".priceline").html("");$(".coupon2").hide();$(".coupon1").show();$("#spanCouponCode").html("");$("#IsProductCode").removeAttr("disabled")})}function ChangeImageByProductCode(n){n!=null&&n!=""&&$("#imgthumb").attr("src",n)}function ChangePriceByProductCode(n){POSTAjax("/aj/Order/GetPriceByCode",{prodCode:n,iProductId:productID,cateId:cateID,iOrderType:0},BeforeSendAjax,function(n){if(n!=null&&n!=""){var n=JSON.parse(n);$(".asideleft .pricesale").html(formatNumberValue(n.p)+"₫")}EndSendAjax()},ErrorAjax,!0)}function CallBackSubmitQuickOrder(n){if(n!=null&&n!=""&&n!=undefined){var t=JSON.parse(n);if(t.ResultType!=1){SUBMIT_QUICK_ORDER_BOX_CALLING_FLAG=!0;f_SubmitQuickOrderSupport=!0;t.ResultMessages&&t.ResultType!=-11&&alert(t.ResultMessages[0]);switch(t.ResultType){case-6:window.location.reload();break;case-10:$(".captcha").show();$(".captcha a").click();break;case-11:ShowErrorLockPhone(t.ResultMessages[0])}}else{switch($("#PaymentMethod").val()){case"2":location.href=t.ResultMessages[1];return;case"3":$("#wrap_cart").html("<div style=\"text-align:center;padding:10px;\"><p>Bạn đang được chuyển sang trang nhập thông tin tài khoản thanh toán<\/p><p><img src='/Content/desktop/images/loading_02.gif' /><\/p><\/div>");setTimeout(function(){location.href=t.ResultMessages[1]},2e3);return}POSTAjax("/aj/Order/OrderSuccess/",{},BeforeSendAjax,function(n){(n!=null||n!="")&&($("#wrap_cart").length==0?$("body").append(n):$("#wrap_cart").replaceWith(n),$.fancybox.update());EndSendAjax()},ErrorAjax,!0)}}}function CheckLoadProvince(){IsLoadProvince||POSTAjax("/aj/Common/GetAllProvince",{},BeforeSendAjax,function(n){if(n!=null&&n!=""){IsLoadProvince=!0;$("#wrap_cart select[name='BillingAddress.ProvinceId']").html(n);var t=getCookie("tgdd_province");$.isNumeric(t)&&t>0?LoadDistictByProvince(t):LoadDistictByProvince(3);$("#wrap_cart select[name='BillingAddress.ProvinceId'] option[value='"+t+"']").prop("selected",!0);$("#wrap_cart select[name='BillingAddress.ProvinceId']").change(function(){LoadDistictByProvince($(this).val())})}EndSendAjax()},ErrorAjax,!0)}function LoadDistictByProvince(n){flag_LoadDistictByProvince||(flag_LoadDistictByProvince=!0,POSTAjax("/aj/Common/GetDistrictByProvince",{ProvinceID:n},BeforeSendAjax,function(n){if(n!=null&&n!=""){IsLoadProvince=!1;$("#wrap_cart select[name='BillingAddress.DistictId']").html(n);var t=getCookie("tgdd_distict");$.isNumeric(t)&&t>0&&$("#wrap_cart select[name='BillingAddress.DistictId']  option[value='"+t+"']").prop("selected",!0)}flag_LoadDistictByProvince=!1;EndSendAjax()},ErrorAjax,!0))}function ChangeHours(n){var t=n.options[n.selectedIndex];$("#wrap_cart select[name='BillingAddress.ShipHour'] option").removeAttr("selected");t.value!="0"?($("#wrap_cart select[name='BillingAddress.ShipHour'] option:eq(0)").attr("selected","selected"),$(".today").show()):($(".today").hide(),$("#wrap_cart select[name='BillingAddress.ShipHour'] option:not(.today):first").attr("selected","selected"))}function ShowErrorLockPhone(n){var t=$("#wrap_cart input[name='BillingAddress.PhoneNumber']").offset().top,i=$("#wrap_cart input[name='BillingAddress.PhoneNumber']").offset().left;$(".noteerror").html(n);$(".noteerror").show();$(".noteerror").offset({top:t-$(".noteerror").height()-30,left:i})}var SUBMIT_QUICK_ORDER_BOX_CALLING_FLAG=!0,qo_submitting=!1,IsLoadProvince=!1,flag_LoadDistictByProvince=!1;